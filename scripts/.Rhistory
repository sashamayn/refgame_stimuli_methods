anns_simple$divideby <- NA
for (exp in 1:4){
anns_simple$divideby[anns_simple$experiment == exp] <- nrow(subset(anns_simple,anns_simple$experiment == exp))
}
anns_long_simple <- anns_simple %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_simple$prop <- anns_long_simple$n/anns_long_simple$divideby
anns_long_simple$correct <- factor(anns_long_simple$correct, levels=c('True','False'))
anns_long_simple$tag_fewer_cats <- factor(anns_long_simple$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_simple_answerWhich <- anns_simple %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_simple_answerWhich$prop <- anns_long_simple_answerWhich$n/anns_long_simple_answerWhich$divideby
anns_long_simple_answerWhich$answer_which <- factor(anns_long_simple_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_simple)[2] <- 'annotation tag'
long_simple_4 <- anns_long_simple
long_simple_4$corr <- ifelse(long_simple_4$correct=='True','correct','incorrect')
#plot of simple, all exps, correct 1/0
head(long_simple_4)
long_simple_4$ann_tag <- long_simple_4$`annotation tag`
long_simple_4$ann_tag <- as.character(long_simple_4$ann_tag)
long_simple_4$ann_tag <- factor(long_simple_4$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
simple_corr_incorr <- ggplot(long_simple_4) + geom_bar(aes(factor(corr),prop, fill = ann_tag),
position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~factor(exp,levels=c('replication','remapped','all messages','shapes')), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
scale_fill_manual(values = c(misunderstood_instr="#ec7063",guess="#99a3a4",other_reason="#3498db",correct_reasoning="#229954")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=15), strip.text.x = element_text(size = 16),
legend.text=element_text(size=15), legend.title=element_text(size=15)) +
xlab('')+ylab('Prop.')
simple_corr_incorr
#plot of simple, all exps, answerWhich
ggplot(exps_long_simple_answerWhich) + geom_bar(aes(factor(answerWhich),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~exp, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(anns_long_simple_answerWhich) + geom_bar(aes(factor(answerWhich),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~exp, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(anns_long_simple_answerWhich) + geom_bar(aes(factor(answer_which),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(anns_long_simple_answerWhich) + geom_bar(aes(factor(answer_which),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
exps_filtered <- anns_filtered
#### stacked bar charts for each correctness, complex only
exps_complex <- subset(exps_filtered, itemtype=="target complex")
exps_complex$divideby <- NA
exps_complex$divideby[exps_complex$exp=='replication'] <- nrow(subset(exps_complex,exps_complex$exp=='replication'))
exps_complex$divideby[exps_complex$exp=='all messages'] <- nrow(subset(exps_complex,exps_complex$exp=='all messages'))
exps_complex$divideby[exps_complex$exp=='remapped'] <- nrow(subset(exps_complex,exps_complex$exp=='remapped'))
exps_complex$divideby[exps_complex$exp=='remapped + instr'] <- nrow(subset(exps_complex,exps_complex$exp=='remapped + instr'))
exps_complex$divideby[exps_complex$exp=='shapes'] <- nrow(subset(exps_complex,exps_complex$exp=='shapes'))
exps_long_complex <- exps_complex %>% group_by(exp, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
exps_long_complex$prop <- exps_long_complex$n/exps_long_complex$divideby
exps_long_complex$correct <- factor(exps_long_complex$correct, levels=c(1,0))
exps_long_complex$tag_fewer_cats <- factor(exps_long_complex$tag_fewer_cats, levels=c("misunderstood_instructions","guess",
"other_reason","correct_reasoning"))
exps_long_complex <- exps_complex %>% group_by(exp, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
exps_long_complex <- exps_complex %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
exps_long_complex$prop <- exps_long_complex$n/exps_long_complex$divideby
exps_long_complex$correct <- factor(exps_long_complex$correct, levels=c(1,0))
exps_long_complex$tag_fewer_cats <- factor(exps_long_complex$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
exps_long_complex_answerWhich <- exps_complex %>% group_by(experiment, tag_fewer_cats, answerWhich, divideby) %>% summarize(n=n())
exps_long_complex_answerWhich <- exps_complex %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
exps_long_complex_answerWhich$prop <- exps_long_complex_answerWhich$n/exps_long_complex_answerWhich$divideby
exps_long_complex_answerWhich$answerWhich <- factor(exps_long_complex_answerWhich$answerWhich, levels=c("target","competitor","distractor"))
exps_long_complex_answerWhich$answerWhich <- factor(exps_long_complex_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(exps_long_complex)[2] <- 'annotation tag'
long_complex_4 <- subset(exps_long_complex, exps_long_complex$exp!='remapped + instr')
long_complex_4 <- exps_long_complex
long_complex_4$corr <- ifelse(long_complex_4$correct=='True','correct','incorrect')
long_complex_4$ann_tag <- long_complex_4$`annotation tag`
long_complex_4$ann_tag <- as.character(long_complex_4$ann_tag)
#long_complex_4$ann_tag[long_complex_4$`annotation tag` == 'misunderstood_instructions'] <- 'misunderstood_instr'
long_complex_4$ann_tag <- factor(long_complex_4$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
#plot of simple, all exps, correct 1/0
complex_corr_incorr <- ggplot(long_complex_4) + geom_bar(aes(factor(corr),prop, fill = ann_tag),
position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~factor(exp,levels=c('replication','remapped','all messages','shapes')), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
scale_fill_manual(values = c(misunderstood_instr="#ec7063",guess="#99a3a4",other_reason="#3498db",correct_reasoning="#229954")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=15), strip.text.x = element_text(size = 16),
legend.text=element_text(size=15), legend.title=element_text(size=15)) +
xlab('')+ylab('Prop.')
#plot of simple, all exps, correct 1/0
complex_corr_incorr <- ggplot(long_complex_4) + geom_bar(aes(factor(corr),prop, fill = ann_tag),
position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~factor(experiment,levels=c(1,2,3,4)), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
scale_fill_manual(values = c(misunderstood_instr="#ec7063",guess="#99a3a4",other_reason="#3498db",correct_reasoning="#229954")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=15), strip.text.x = element_text(size = 16),
legend.text=element_text(size=15), legend.title=element_text(size=15)) +
xlab('')+ylab('Prop.')
complex_corr_incorr
#plot of simple, all exps, correct 1/0
complex_corr_incorr <- ggplot(long_complex_4) + geom_bar(aes(factor(corr),prop, fill = ann_tag),
position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
scale_fill_manual(values = c(misunderstood_instr="#ec7063",guess="#99a3a4",other_reason="#3498db",correct_reasoning="#229954")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=15), strip.text.x = element_text(size = 16),
legend.text=element_text(size=15), legend.title=element_text(size=15)) +
xlab('')+ylab('Prop.')
complex_corr_incorr
long_complex_4
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggpubr)
anns <- read.csv('../data/all_annotations.csv')
data <- read.csv('../data/all_experiments.csv')[,c('participantid','itemid','strategy_text','correct','answer_which')]
anns <- merge(anns, data, by=c('participantid','itemid','strategy_text'))
anns_filtered <- subset(anns, anns$tag_both != 'unclear' & anns$tag_both != 'exclude')
#coarse-grained tag
anns_filtered$tag_fewer_cats <- anns_filtered$tag_both
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'odd_one_out' |
anns_filtered$subtag_both == 'visual_resemblance' |
anns_filtered$subtag_both == 'salience' |
anns_filtered$subtag_both == 'preference' |
anns_filtered$subtag_both == 'other'] <- 'other_reason'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'variability' |
anns_filtered$subtag_both == 'multiturn' |
anns_filtered$subtag_both == 'screenloc'] <- 'guess'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'misunderstood_instructions'] <- 'misunderstood_instr'
#fine-grained tag (incl subcategory)
anns_filtered$tag_fine <- anns_filtered$subtag_both
anns_filtered$tag_fine[anns_filtered$tag_both == 'correct_reasoning'] <- 'correct_reasoning'
anns_filtered$tag_fine[anns_filtered$tag_both == 'guess'] <- 'guess'
anns_filtered$tag_fine[anns_filtered$tag_both == 'unclear'] <- 'unclear'
anns_filtered$tag_fine[anns_filtered$tag_both == 'exclude'] <- 'exclude'
#### stacked bar charts for each correctness, simple only
anns_simple <- subset(anns_filtered, itemtype=="target simple")
anns_simple$divideby <- NA
for (exp in 1:4){
anns_simple$divideby[anns_simple$experiment == exp] <- nrow(subset(anns_simple,anns_simple$experiment == exp))
}
anns_long_simple <- anns_simple %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_simple$prop <- anns_long_simple$n/anns_long_simple$divideby
anns_long_simple$correct <- factor(anns_long_simple$correct, levels=c('True','False'))
anns_long_simple$tag_fewer_cats <- factor(anns_long_simple$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_simple_answerWhich <- anns_simple %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_simple_answerWhich$prop <- anns_long_simple_answerWhich$n/anns_long_simple_answerWhich$divideby
anns_long_simple_answerWhich$answer_which <- factor(anns_long_simple_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_simple)[2] <- 'annotation tag'
long_simple_4 <- anns_long_simple
long_simple_4$corr <- ifelse(long_simple_4$correct=='True','correct','incorrect')
long_simple_4$ann_tag <- long_simple_4$`annotation tag`
long_simple_4$ann_tag <- as.character(long_simple_4$ann_tag)
long_simple_4$ann_tag <- factor(long_simple_4$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
#plot of simple, all exps, answerWhich
ggplot(anns_long_simple_answerWhich) + geom_bar(aes(factor(answer_which),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(anns_long_simple_answerWhich) + geom_bar(aes(factor(corr),prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
long_simple_4
#plot of simple, all exps, answerWhich
ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = tag_fewer_cats),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = `annotatiion_tag`),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps, answerWhich
ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = `annotation_tag`),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
long_simple_4
#plot of simple, all exps, answerWhich
ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps
ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of simple, all exps
simple_byexp <- ggplot(long_simple_4) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
anns_long_simple_answerWhich <- anns_simple %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_simple_answerWhich$prop <- anns_long_simple_answerWhich$n/anns_long_simple_answerWhich$divideby
anns_long_simple_answerWhich$answer_which <- factor(anns_long_simple_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_simple)[2] <- 'annotation tag'
anns_long_simple$corr <- ifelse(anns_long_simple$correct=='True','correct','incorrect')
anns_long_simple$ann_tag <- anns_long_simple$`annotation tag`
anns_long_simple$ann_tag <- as.character(anns_long_simple$ann_tag)
anns_long_simple$ann_tag <- factor(anns_long_simple$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
#plot of simple, all exps
simple_byexp <- ggplot(anns_long_simple) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
simple_byexp
#### stacked bar charts, complex only
anns_simple <- subset(anns_filtered, itemtype=="target complex")
complex
#### stacked bar charts, complex only
anns_complex <- subset(anns_filtered, itemtype=="target complex")
#### stacked bar charts, complex only
anns_complex <- subset(anns_filtered, itemtype=="target complex")
anns_complex$divideby <- NA
for (exp in 1:4){
anns_complex$divideby[anns_complex$experiment == exp] <- nrow(subset(anns_complex,anns_complex$experiment == exp))
}
anns_long_complex <- anns_complex %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_complex$prop <- anns_long_complex$n/anns_long_complex$divideby
anns_long_complex$correct <- factor(anns_long_complex$correct, levels=c('True','False'))
anns_long_complex$tag_fewer_cats <- factor(anns_long_complex$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_complex_answerWhich <- anns_complex %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_complex_answerWhich$prop <- anns_long_complex_answerWhich$n/anns_long_complex_answerWhich$divideby
anns_long_complex_answerWhich$answer_which <- factor(anns_long_complex_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_complex)[2] <- 'annotation tag'
anns_long_complex$corr <- ifelse(anns_long_complex$correct=='True','correct','incorrect')
anns_long_complex$ann_tag <- anns_long_complex$`annotation tag`
anns_long_complex$ann_tag <- as.character(anns_long_complex$ann_tag)
anns_long_complex$ann_tag <- factor(anns_long_complex$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
#plot of complex, all exps
simple_byexp <- ggplot(anns_long_complex) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
#plot of complex, all exps
complex_byexp <- ggplot(anns_long_complex) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
complex_byexp
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_filtered,anns_filtered$itemtype=="target simple" & anns_filtered$tag_both == "other_reason")
other_reason_simple$tag_fine
other_reason_simple <- subset(anns_reason_simple, tag_fine != "misunderstood_instructions")
other_reason_simple <- subset(other_reason_simple, tag_fine != "misunderstood_instructions")
exps_long_simple_other <- other_reason_simple %>% group_by(exp, tag_fine, correct, divideby) %>% summarize(n=n())
other_reason_simple
head(anns_long_simple)
other_reason_simple
anns_simple
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggpubr)
anns <- read.csv('../data/all_annotations.csv')
data <- read.csv('../data/all_experiments.csv')[,c('participantid','itemid','strategy_text','correct','answer_which')]
anns <- merge(anns, data, by=c('participantid','itemid','strategy_text'))
anns_filtered <- subset(anns, anns$tag_both != 'unclear' & anns$tag_both != 'exclude')
#coarse-grained tag
anns_filtered$tag_fewer_cats <- anns_filtered$tag_both
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'odd_one_out' |
anns_filtered$subtag_both == 'visual_resemblance' |
anns_filtered$subtag_both == 'salience' |
anns_filtered$subtag_both == 'preference' |
anns_filtered$subtag_both == 'other'] <- 'other_reason'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'variability' |
anns_filtered$subtag_both == 'multiturn' |
anns_filtered$subtag_both == 'screenloc'] <- 'guess'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'misunderstood_instructions'] <- 'misunderstood_instr'
#fine-grained tag (incl subcategory)
anns_filtered$tag_fine <- anns_filtered$subtag_both
anns_filtered$tag_fine[anns_filtered$tag_both == 'correct_reasoning'] <- 'correct_reasoning'
anns_filtered$tag_fine[anns_filtered$tag_both == 'guess'] <- 'guess'
anns_filtered$tag_fine[anns_filtered$tag_both == 'unclear'] <- 'unclear'
anns_filtered$tag_fine[anns_filtered$tag_both == 'exclude'] <- 'exclude'
#### stacked bar chart, simple only
anns_simple <- subset(anns_filtered, itemtype=="target simple")
anns_simple$divideby <- NA
for (exp in 1:4){
anns_simple$divideby[anns_simple$experiment == exp] <- nrow(subset(anns_simple,anns_simple$experiment == exp))
}
anns_long_simple <- anns_simple %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_simple$prop <- anns_long_simple$n/anns_long_simple$divideby
anns_long_simple$correct <- factor(anns_long_simple$correct, levels=c('True','False'))
anns_long_simple$tag_fewer_cats <- factor(anns_long_simple$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_simple_answerWhich <- anns_simple %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_simple_answerWhich$prop <- anns_long_simple_answerWhich$n/anns_long_simple_answerWhich$divideby
anns_long_simple_answerWhich$answer_which <- factor(anns_long_simple_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_simple)[2] <- 'annotation tag'
anns_long_simple$corr <- ifelse(anns_long_simple$correct=='True','correct','incorrect')
anns_long_simple$ann_tag <- anns_long_simple$`annotation tag`
anns_long_simple$ann_tag <- as.character(anns_long_simple$ann_tag)
anns_long_simple$ann_tag <- factor(anns_long_simple$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
simple_byexp <- ggplot(anns_long_simple) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
simple_byexp
anns_simple$divideby
#### stacked bar chart, complex only
anns_complex <- subset(anns_filtered, itemtype=="target complex")
anns_complex$divideby <- NA
for (exp in 1:4){
anns_complex$divideby[anns_complex$experiment == exp] <- nrow(subset(anns_complex,anns_complex$experiment == exp))
}
anns_long_complex <- anns_complex %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_complex$prop <- anns_long_complex$n/anns_long_complex$divideby
anns_long_complex$correct <- factor(anns_long_complex$correct, levels=c('True','False'))
anns_long_complex$tag_fewer_cats <- factor(anns_long_complex$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_complex_answerWhich <- anns_complex %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_complex_answerWhich$prop <- anns_long_complex_answerWhich$n/anns_long_complex_answerWhich$divideby
anns_long_complex_answerWhich$answer_which <- factor(anns_long_complex_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_complex)[2] <- 'annotation tag'
anns_long_complex$corr <- ifelse(anns_long_complex$correct=='True','correct','incorrect')
anns_long_complex$ann_tag <- anns_long_complex$`annotation tag`
anns_long_complex$ann_tag <- as.character(anns_long_complex$ann_tag)
anns_long_complex$ann_tag <- factor(anns_long_complex$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
complex_byexp <- ggplot(anns_long_complex) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
complex_byexp
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple" & anns_filtered$tag_both == "other_reason")
anns_simple
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple" & anns_filtered$tag_both == "other_reason")
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple")
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple" & anns_simple$tag_both == "other_reason")
other_reason_simple$tag_fine
other_reason_simple <- subset(other_reason_simple, tag_fine != "misunderstood_instructions")
exps_long_simple_other <- other_reason_simple %>% group_by(exp, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_simple_other <- other_reason_simple %>% group_by(experiment, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_simple_other$corr <- ifelse(exps_long_simple_other$correct=='True','correct','incorrect')
other_reason_simple_plot <- ggplot(exps_long_simple) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_simple_plot <- ggplot(exps_long_simple_other) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_simple_plot
exps_long_simple_other
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple" & anns_simple$tag_both == "other_reason")
other_reason_simple <- subset(other_reason_simple, tag_fine != "misunderstood_instructions")
exps_long_simple_other <- other_reason_simple %>% group_by(experiment, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_simple_other
library(dplyr)
library(tidyr)
library(ggplot2)
library(ggpubr)
anns <- read.csv('../data/all_annotations.csv')
data <- read.csv('../data/all_experiments.csv')[,c('participantid','itemid','strategy_text','correct','answer_which')]
anns <- merge(anns, data, by=c('participantid','itemid','strategy_text'))
anns_filtered <- subset(anns, anns$tag_both != 'unclear' & anns$tag_both != 'exclude')
#coarse-grained tag
anns_filtered$tag_fewer_cats <- anns_filtered$tag_both
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'odd_one_out' |
anns_filtered$subtag_both == 'visual_resemblance' |
anns_filtered$subtag_both == 'salience' |
anns_filtered$subtag_both == 'preference' |
anns_filtered$subtag_both == 'other'] <- 'other_reason'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'variability' |
anns_filtered$subtag_both == 'multiturn' |
anns_filtered$subtag_both == 'screenloc'] <- 'guess'
anns_filtered$tag_fewer_cats[anns_filtered$subtag_both == 'misunderstood_instructions'] <- 'misunderstood_instr'
#fine-grained tag (incl subcategory)
anns_filtered$tag_fine <- anns_filtered$subtag_both
anns_filtered$tag_fine[anns_filtered$tag_both == 'correct_reasoning'] <- 'correct_reasoning'
anns_filtered$tag_fine[anns_filtered$tag_both == 'guess'] <- 'guess'
anns_filtered$tag_fine[anns_filtered$tag_both == 'unclear'] <- 'unclear'
anns_filtered$tag_fine[anns_filtered$tag_both == 'exclude'] <- 'exclude'
#### stacked bar chart, simple only
anns_simple <- subset(anns_filtered, itemtype=="target simple")
anns_simple$divideby <- NA
for (exp in 1:4){
anns_simple$divideby[anns_simple$experiment == exp] <- nrow(subset(anns_simple,anns_simple$experiment == exp))
}
anns_long_simple <- anns_simple %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_simple$prop <- anns_long_simple$n/anns_long_simple$divideby
anns_long_simple$correct <- factor(anns_long_simple$correct, levels=c('True','False'))
anns_long_simple$tag_fewer_cats <- factor(anns_long_simple$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_simple_answerWhich <- anns_simple %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_simple_answerWhich$prop <- anns_long_simple_answerWhich$n/anns_long_simple_answerWhich$divideby
anns_long_simple_answerWhich$answer_which <- factor(anns_long_simple_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_simple)[2] <- 'annotation tag'
anns_long_simple$corr <- ifelse(anns_long_simple$correct=='True','correct','incorrect')
anns_long_simple$ann_tag <- anns_long_simple$`annotation tag`
anns_long_simple$ann_tag <- as.character(anns_long_simple$ann_tag)
anns_long_simple$ann_tag <- factor(anns_long_simple$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
simple_byexp <- ggplot(anns_long_simple) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
simple_byexp
#### stacked bar chart, complex only
anns_complex <- subset(anns_filtered, itemtype=="target complex")
anns_complex$divideby <- NA
for (exp in 1:4){
anns_complex$divideby[anns_complex$experiment == exp] <- nrow(subset(anns_complex,anns_complex$experiment == exp))
}
anns_long_complex <- anns_complex %>% group_by(experiment, tag_fewer_cats, correct, divideby) %>% summarize(n=n())
anns_long_complex$prop <- anns_long_complex$n/anns_long_complex$divideby
anns_long_complex$correct <- factor(anns_long_complex$correct, levels=c('True','False'))
anns_long_complex$tag_fewer_cats <- factor(anns_long_complex$tag_fewer_cats, levels=c("misunderstood_instr","guess",
"other_reason","correct_reasoning"))
anns_long_complex_answerWhich <- anns_complex %>% group_by(experiment, tag_fewer_cats, answer_which, divideby) %>% summarize(n=n())
anns_long_complex_answerWhich$prop <- anns_long_complex_answerWhich$n/anns_long_complex_answerWhich$divideby
anns_long_complex_answerWhich$answer_which <- factor(anns_long_complex_answerWhich$answer_which, levels=c("target","competitor","distractor"))
colnames(anns_long_complex)[2] <- 'annotation tag'
anns_long_complex$corr <- ifelse(anns_long_complex$correct=='True','correct','incorrect')
anns_long_complex$ann_tag <- anns_long_complex$`annotation tag`
anns_long_complex$ann_tag <- as.character(anns_long_complex$ann_tag)
anns_long_complex$ann_tag <- factor(anns_long_complex$ann_tag,levels=c('misunderstood_instr','guess','other_reason','correct_reasoning'))
complex_byexp <- ggplot(anns_long_complex) + geom_bar(aes(correct, prop, fill = ann_tag),position  = 'stack', width = 0.6, stat="identity") +
facet_wrap(~experiment, nrow = 1) + theme(panel.spacing = unit(0, "lines")) + scale_fill_manual(values = c("#ec7063","#99a3a4",
"#3498db","#229954")) +
theme(panel.spacing.x = unit(0.5, "lines")) + xlab('Correct')+ylab('Prop.')
complex_byexp
### stacked bar charts for other_reason (breakdown by tag), simple only
other_reason_simple <- subset(anns_simple,anns_simple$itemtype=="target simple" & anns_simple$tag_both == "other_reason")
other_reason_simple <- subset(other_reason_simple, tag_fine != "misunderstood_instructions")
exps_long_simple_other <- other_reason_simple %>% group_by(experiment, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_simple_other$corr <- ifelse(exps_long_simple_other$correct=='True','correct','incorrect')
other_reason_simple_plot <- ggplot(exps_long_simple_other) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_simple_plot
### stacked bar charts for other_reason (breakdown by tag), complex only
other_reason_complex <- subset(anns_complex,anns_complex$itemtype=="target simple" & anns_complex$tag_both == "other_reason")
other_reason_complex <- subset(other_reason_complex, tag_fine != "misunderstood_instructions")
exps_long_complex_other$corr <- ifelse(exps_long_complex_other$correct=='True','correct','incorrect')
exps_long_complex_other <- other_reason_complex %>% group_by(experiment, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_complex_other$corr <- ifelse(exps_long_complex_other$correct=='True','correct','incorrect')
other_reason_simple_plot <- ggplot(exps_long_complex_other) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_complex_plot <- ggplot(exps_long_complex_other) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_complex_plot
exps_long_complex_other
### stacked bar charts for other_reason (breakdown by tag), complex only
other_reason_complex <- subset(anns_complex,anns_complex$itemtype=="target simple" & anns_complex$tag_both == "other_reason")
other_reason_complex <- subset(other_reason_complex, tag_fine != "misunderstood_instructions")
### stacked bar charts for other_reason (breakdown by tag), complex only
other_reason_complex <- subset(anns_complex,anns_complex$itemtype=="target simple" & anns_complex$tag_both == "other_reason")
anns_complex
### stacked bar charts for other_reason (breakdown by tag), complex only
other_reason_complex <- subset(anns_complex,anns_complex$itemtype=="target complex" & anns_complex$tag_both == "other_reason")
other_reason_complex <- subset(other_reason_complex, tag_fine != "misunderstood_instructions")
exps_long_complex_other <- other_reason_complex %>% group_by(experiment, tag_fine, correct, divideby) %>% summarize(n=n())
exps_long_complex_other$corr <- ifelse(exps_long_complex_other$correct=='True','correct','incorrect')
other_reason_complex_plot <- ggplot(exps_long_complex_other) +
geom_bar(aes(factor(corr),n, fill = tag_fine),position  = 'stack', width = 0.6,
stat="identity") + facet_wrap(~factor(experiment), nrow = 1) + theme(panel.spacing = unit(0, "lines")) +
theme(panel.spacing.x = unit(0.5, "lines"), axis.text=element_text(size=14),
axis.title=element_text(size=14), strip.text.x = element_text(size = 15),
legend.text=element_text(size=15), legend.title=element_text(size=15),
) + xlab('')+
ylab('Count') + scale_fill_manual('other reason type', values =
c(odd_one_out = "#809fff", other = "#a3a3c2", preference = "#ff66b3",
salience = "#d5ff80", visual_resemblance = "#00cc99"))
other_reason_complex_plot
